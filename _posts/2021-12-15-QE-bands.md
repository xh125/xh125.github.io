---
layout:     post
title:      "QUANTUM ESPRESSO：bands"
date:       2021-12-15 16:56:00
author:     "Xiehua"
header-img: "images/post/post-bg-understand.jpg"
tags:
    - QUANTUM ESPRESSO
    - bands
---

## QUANTUM ESPRESSO：[bands.x](http://www.quantum-espresso.org/Doc/INPUT_BANDS.html)

采用scf计算得到电荷密度和波函数进行bands计算，非自洽（bands）计算能带

设置`nscf-bands.in`文件,需要修改的参数包括：`calculation`,`nbnd`,`K_POINTS`  

```fortran
&CONTROL
    calculation   = "bands"  
    restart_mode  = "from_scratch"
    prefix        = "carbyne"
    outdir        = "./outdir/"
    pseudo_dir    = "./pseudo/"
    verbosity     = "high"
    tprnfor       = .true.  
    tstress       = .true.
    etot_conv_thr =  1.0d-6
/

&SYSTEM
    ibrav       = 6
    celldm(1)   = 18.89726125
    celldm(3)   = 0.256551169
    nat         = 2
    ntyp        = 1
    nbnd        = 22
    occupations = 'fixed'
    ecutwfc     =  50
    ecutrho     =  400
/

&ELECTRONS
    conv_thr         =  1.000e-9
    electron_maxstep =  200
    mixing_beta      =  0.7
    startingpot      = "atomic"
    startingwfc      = "atomic+random"
/

K_POINTS crystal_b
2
0.0 0.0 -0.5  400
0.0 0.0  0.5  1   

ATOMIC_SPECIES
C      12.01070  C.pbe-n-kjpaw_psl.1.0.0.UPF

ATOMIC_POSITIONS (angstrom)
C             5.0000000000       5.0000000000       0.0000000000    0   0   0
C             5.0000000000       5.0000000000       1.2640744811    0   0   1
```

### NSCF计算完成后，使用[bands.x](http://www.quantum-espresso.org/Doc/INPUT_BANDS.html)程序来处理得到态密度，输入文件`bands.in`如下  

```fortran
&bands
prefix = 'carbyne'
outdir = './outdir'
filband = 'carbyne.bands.dat'
lsym = .true.
/
```

对文件carbyne.bands.dat使用Originlab作图，并将能量减去VBM值，使得VBM=0  ，能带结构如下：  
![dos](https://xh125.github.io/images/post/bands.png)  

### 使用[projwfc.x](http://www.quantum-espresso.org/Doc/INPUT_PROJWFC.html)计算投影态密度(PDOS)  

输入文件projwfc.in如下：  

```fortran
&projwfc
prefix = 'carbyne'
outdir = './outdir'
ngauss = 1
degauss = 5.0d-3
deltaE  = 0.01
filpdos = 'carbyne.pdos'
filproj = 'carbyne.proj'
/
```

得到分波态密度图（PDOS）如下：

![pdos](https://xh125.github.io/images/post/pdos.png)  